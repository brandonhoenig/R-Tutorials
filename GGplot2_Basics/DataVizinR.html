<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="brandonhoenig@gmail.com, @BrandonHoenig" />


<meta name="progressive" content="false" />
<meta name="allow-skip" content="false" />

<title>Data Visualization in R: GGplot2 Basics</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>
<!-- end tabsets -->



</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-welcome-to-the-ggplot2-basics-tutorial" class="section level1">
<h1>Welcome to the GGplot2 Basics Tutorial!</h1>
<div id="section-introduction" class="section level2">
<h2>Introduction</h2>
<p>In this Tutorial will cover the basics of plotting your data in R using the package <em>ggplot2</em>.</p>
<p>ggplot2 is a package within the tidyverse that allows us to transform our data into meaningful, publishable visualizations.</p>
<p>Now, as the possibilities in R are limitless, this tutorial will cover the basics of plotting your data in ggplot2. Therefore, this tutorial is for those who know how to input data into R, how to run functions in R, and how to modify their code if issues arise. If you are unfamiliar with these principles of R, I will direct you to my other tutorial (link here).</p>
<p>For this tutorial, you will need to have installed:</p>
<ul>
<li>ggplot2</li>
<li>dplyr</li>
<li>tidyr</li>
</ul>
<p>You can do this by running <em>install.packages(‘ggplot2’)</em> followed by <em>library(ggplot2)</em>. Repeat this step for dplyr and tidyr.</p>
<pre class="r"><code>library(ggplot2)
library(dplyr)
library(tidyr)</code></pre>
<p>To begin, a basic ggplot is made up of five units.</p>
<ul>
<li><p>Data - The file that contains our data</p></li>
<li><p>Aesthetics - The variables that are to be plotted.</p></li>
<li><p>Geometries - The type of plot that we want to create.</p></li>
<li><p>Scales - Customization of our aesthetics (i.e. variables).</p></li>
<li><p>Themes - A method to customize each detail of a plot.</p></li>
</ul>
<p>In this tutorial, we will go familiarize ourselves with each of these units, learn how to manipulate these units, and finally, make beautiful data visualizations.</p>
</div>
<div id="section-topic-1---data" class="section level2">
<h2>Topic 1 - Data</h2>
<p>Its pretty difficult to make a plot without data, so the first thing we will have to do is tell R what we want to visualize.</p>
<p>To do this we are going to load data that is already built into R, the ‘mtcars’ dataset. For your own work, this would be your own data.</p>
<pre class="r"><code>data(&#39;mtcars&#39;)</code></pre>
<p><em>‘mtcars’ is a dataset that was extracted from the 1974 Motor Trends Magazine that details the characteristics of 32 vehicles.</em></p>
<p>The next thing we’ll want to do is take a look at our data. It often happens that what you <em>think</em> you imported is not what you <em>actually</em> imported. So lets take a look at our variables with the ‘head’ function.</p>
<pre class="r"><code>head(mtcars)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["mpg"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cyl"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["disp"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["hp"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["drat"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["wt"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["qsec"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["vs"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["am"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["gear"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["carb"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"21.0","2":"6","3":"160","4":"110","5":"3.90","6":"2.620","7":"16.46","8":"0","9":"1","10":"4","11":"4","_rn_":"Mazda RX4"},{"1":"21.0","2":"6","3":"160","4":"110","5":"3.90","6":"2.875","7":"17.02","8":"0","9":"1","10":"4","11":"4","_rn_":"Mazda RX4 Wag"},{"1":"22.8","2":"4","3":"108","4":"93","5":"3.85","6":"2.320","7":"18.61","8":"1","9":"1","10":"4","11":"1","_rn_":"Datsun 710"},{"1":"21.4","2":"6","3":"258","4":"110","5":"3.08","6":"3.215","7":"19.44","8":"1","9":"0","10":"3","11":"1","_rn_":"Hornet 4 Drive"},{"1":"18.7","2":"8","3":"360","4":"175","5":"3.15","6":"3.440","7":"17.02","8":"0","9":"0","10":"3","11":"2","_rn_":"Hornet Sportabout"},{"1":"18.1","2":"6","3":"225","4":"105","5":"2.76","6":"3.460","7":"20.22","8":"1","9":"0","10":"3","11":"1","_rn_":"Valiant"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can see that our data is numeric and tells us data about the number of cylinders (cyl), horsepower (hp), weight (wt), and 8 other variables for each vehicle.</p>
<p>Below is a typical set of code to make a plot in ggplot</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg)) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-4-1.png" width="624" /></p>
<p>Here, we can see that as the horsepower (hp, x axis) of a particular vehicle increases, the miles per gallon (mpg, y axis) tends to decrease. This makes sense as Prius’s typically get more to the gallon than a Mustang.</p>
<p>We will ignore the bottom three lines of code and only focus on the <em>ggplot(data = mtcars)</em>. In this line, we have told R that we’d like ggplot to look into the mtcars dataset. However, R cannot read minds, so if we only told R to look at the mtcars dataset, it would look like this:</p>
<pre class="r"><code>ggplot(data = mtcars)</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-5-1.png" width="624" /></p>
<p>As we can see above, data is not enough to make a plot. In the next topic, we’ll look into the variables being plotted, also known as <em>the aesthetics</em>.</p>
</div>
<div id="section-topic-2---aesthetics" class="section level2">
<h2>Topic 2 - Aesthetics</h2>
<p>The variables that are displayed are the most important aspect of any plot. They tell the audience what you are researching, the relationship between these variables, and serve as the best method to convey what you are trying to say. If a picture is worth a thousand words, a good plot is worth a thousand citations. In ggplot, the variables that are plotted are called <em>aesthetics</em>. <em>Aesthetics</em> allow us to put our data onto the plot, change the color of those points, alter the shape of each bar, and truly customize our graph so the data shows the most meaning possible.</p>
<p>To see how we can customize a plot, lets go back to our first example.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg)) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-6-1.png" width="624" /></p>
<p>In the example above, our <em>aesthetics</em> are horsepower(hp, x axis) and miles per gallon (mpg, y axis). <em>For now we will ignore the ‘geom_point’ aspect of this line of code.</em></p>
<p>Notice that in the above example, our <em>aesthetics</em> are within the aes() function. What would happen if they were not?</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(x = hp, 
                 y = mpg) </code></pre>
<pre><code>## Error in layer(data = data, mapping = mapping, stat = stat, geom = GeomPoint, : object &#39;hp&#39; not found</code></pre>
<p>We recieve an error message. The reason for this is that we did not tell R that we wanted to see mpg and hp on the plot. Not enclosing your aesthetics within the aes() function is one of the most common errors in ggplot, so be certain to check there before you tear your hair out.</p>
<p>Now, what if we wanted to look at another variable? For now, we see that miles per gallon decreases with horsepower, but what if we wanted to include a third dimension to this plot that looks at number of cylinders (cyl)? We add another aesthetic!</p>
<p>Lets take a look at the example below.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg,
                 shape = factor(cyl))) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-8-1.png" width="624" /></p>
<pre class="r"><code>#First, we have to make the cyl variable into a factor.  This allows R to look at each number of cylinders as discrete variables and not continuous variables</code></pre>
<p>We now see that two things occurred.</p>
<ol style="list-style-type: decimal">
<li>We now have three shapes in our plot (circles, 4 cylinders, circle; 6 cylinders, triangle; 8 cylinders, square).</li>
<li>We have a legend for our plot on the right side.</li>
</ol>
<p>By adding another variable, we not only see that higher horsepower leads to worse gas mileage, but also that many high mpg/low hp vehicles have 4 cylinders while low mpg/high hp vehicles have 8 cylinders!</p>
<p>Now that we have a better understanding of how aesthetics work, lets do an exercise to add some color to this plot.</p>
<p>Change the code below so that each cylinder is represented by its own color and shape. Like this:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-9-1.png" width="624" /></p>
<p>Alter this code to get the above graph. Check the solution once you’ve completed the exercise. <img src="DataVizinR_files/figure-html/exercise-aes-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-aes-solution-1.png" width="624" /></p>
<p>This is a nice plot, however, it does look like these points are a little small. Let’s see if we can make them a little bigger.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg,
                 shape = factor(cyl),
                 color = factor(cyl),
                 size = 3))</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-10-1.png" width="624" /></p>
<p>It seems that we made the points bigger, however, we also now have size as a variable in our legend, which means we must have plotted size as an aesthetic. Sometimes, plotting size as an aesthetic is helpful, but in this case we only want to change the size of our points.</p>
<p>To do this, we have to make sure we put ‘size = 5’ <em>outside of</em> the aesthetic function, but keep it inside of the geom function.</p>
<p>We can see this below:</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg,
                 shape = factor(cyl),
                 color = factor(cyl)), #note the outer parenthese encloses the second factor within the aes function, but leaves the size = 5 argument outside of the aes function, but inside of the geom_point function. 
                 size = 3) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-11-1.png" width="624" /></p>
<p>Now that is a good looking plot!</p>
<p>To this point we’ve focused solely on point plots, but what if we want to make other kinds of plots? To do that we have to talk more about…<em>geoms</em>.</p>
</div>
<div id="section-topic-3---geometries" class="section level2">
<h2>Topic 3 - Geometries</h2>
<p>Geometries, or geoms as they’re often called, are what tells R what kind of plot we want to work with. The plots that we will go over today are: -Scatter plot = geom_point() -Box and Whisker plot = geom_boxplot() -Histograms = geom_histogram()</p>
<p>We’ve done a lot with scatter plots already, so lets try out a box and whisker plot.</p>
<p>Below we’ve plotted the miles per gallon based on the number of cylinders that a vehicle has.</p>
<pre class="r"><code>ggplot(mtcars) +
  geom_boxplot(aes(x = factor(cyl), #we need to make cyl into a factor.
                   y = mpg)) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-12-1.png" width="624" /></p>
<p>While the scatter plot showed us the relationship between number of cylinders and miles per gallon, the box and whisker plot really shows this relationship! It is good practice to include your points in a box and a whisker plot, but how can we add this to the plot? By adding another geom!</p>
<pre class="r"><code>ggplot(mtcars) +
  geom_boxplot(aes(x = factor(cyl), #we need to make cyl into a factor.
                   y = mpg)) +
  geom_point(aes(x = factor(cyl), #we need to make cyl into a factor.
                   y = mpg)) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-13-1.png" width="624" /></p>
<p>Now we can see that our boxplots follow a pretty normal distribution.</p>
<p><em><em>Layers in ggplots</em></em></p>
<p>Plotting two geoms in a single ggplot shows the <em>layers</em> that are present in a ggplot. You may have been wondering ‘What is up with all these plus signs? How do I know when to put a plus sign in my code?’</p>
<p>Each plus sign indicates that we want to add a new layer to our graph.</p>
<p>Let’s take a look at our code one more time.</p>
<p>In the top line ‘ggplot(mtcars)’: we’ve added a data layer. If we recall from earlier, there’s not a whole lot in a data layer and it really only gives us a grey screen.</p>
<p>In the next line ‘geom_boxplot(aes(x = factor(cyl), y = mpg))’: we’ve added a geom layer that puts a boxplot onto our graph. This layer has aesthetics (x = factor(cyl) and y = mpg) which tells R that we want these variables plotted onto this geom layer.</p>
<p>In the next line ‘geom_point(aes(x = factor(cyl), y = mpg))’: we’ve added a geom layer that puts a scatter plot onto our graph. This layer has aesthetics (x = factor(cyl) and y = mpg) which tells R that we want these variables plotted onto this geom layer.</p>
<p>Finally, we have the ‘theme_bw()’: we’ll talk more about this later, but themes make a graph look better.</p>
<p>Lets revisit our plot one more time:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-15-1.png" width="624" /></p>
<p>As we can see, our points are over top of our boxplots. What happens if we plot our scatterplot(geom_point) followed by our boxplot?</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-16-1.png" width="624" /></p>
<p>We lost our points that are in the same range as the boxplot! This happens because the default color for boxplots is white. Therefore, we’ve effectively layed a white sheet over our points. While it is possible to make our boxplot transparent, this illustrates the importance of understanding the layered nature of ggplots.</p>
<p>Now that we better understand geom’s, lets see if you can make a scatterplot that compares miles per gallon on the y axis and horsepower on the x axis. Then, add a regression line using the geom_smooth() function.</p>
<p>It should look like this:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-17-1.png" width="624" /></p>
<p>Fill in the missing data below to make the plot above.</p>
<p><img src="DataVizinR_files/figure-html/exercise-geom1-solution-1.png" width="624" /></p>
<p>Up to this point, we’ve used plots that require both an x and a y aesthetic, but for histograms (geom_histogram()), only a single aesthetic is needed. Lets take a look below.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_histogram(aes(x = mpg)) </code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-18-1.png" width="624" /></p>
<p>Because histograms look at the frequency of a particular occurence, only the x variable is needed as the frequency (count, y axis) is taken from the number of occurrences for each mile per gallon group.</p>
<p>ggplot takes liberties with grouping, however, this can be overrode by adding in an argument. The example below groups all occurrences into 3 mpg groups with the ‘binwidth = 3’ argument.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_histogram(aes(x = mpg),
                 binwidth = 3) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-19-1.png" width="624" /></p>
<p>We can also choose how many bins we want using the ‘bins’ argument.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_histogram(aes(x = mpg),
                 bins = 20) </code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-20-1.png" width="624" /></p>
<p>This created 20 bins (though some bins did not have data).</p>
<p>We have actually used an argument within a geom before when we added method = ‘lm’ to our geom_smooth() function. Here is what it would look like if we didn’t add that function.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg)) +
  geom_smooth(aes(x = hp,
                 y = mpg)) </code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-21-1.png" width="624" /></p>
<p>The default with the geom_smooth function is to plot a locally-weighted smoothing line. This is useful sometimes, but most times we just want to add a linear model trendline.</p>
<p>Now that we are comfortable with geoms as well as additional arguments within the function. Lets try another exercise!</p>
<p>For this exercise, make a boxplot with the scatter points on top of the boxplot with the x axis being the number of cylinders and the y axis being the miles per gallon. From here, make each point color correspond to the number of cylinders. For the boxplots, make each box outline the color ‘red’ and the fill for each of the boxplots ‘pink’. This won’t be a particular pretty plot, but it will allow you to show off your skills.</p>
<p>It should look like this:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-22-1.png" width="624" /></p>
<p>Fill in the code below to answer the above question</p>
<p><img src="DataVizinR_files/figure-html/exercise-geom2-solution-1.png" width="624" /></p>
<p>Now that plot is hideous, but it just shows how customizable plots can be in ggplot!</p>
<p>One sticking point for ggplot is the customizableness (thats not word) of it! In our next basics topic, we will be changing how the variables appear on a chart using <em>scales</em>.</p>
</div>
<div id="section-topic-4---scales" class="section level2">
<h2>Topic 4 - Scales</h2>
<p>Up to this point, we’ve made some pretty unpublishable graphs. Our axes had awful labels, the color choices we made could have been better, and maybe we want to change the shapes we plotted. To make these changes, we use the <em>scales</em> functions.</p>
<p><em>Scales</em> are what we use to customize any of the variables in our plot and how they are viewed. One such thing we can do is change the types of points in our scatter plot.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-23-1.png" width="624" /></p>
<p>In the above example, we used the ‘scale_shape_manual’ function to add a scale layer to our plot. Within this function, we have two arguments: breaks and values. - breaks: tells R which values (i.e. number of cylinders) we want to change on our plot. - values: tells R which shapes we want to use based off the shape palet below.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-24-1.png" width="624" /></p>
<p>There are many other shapes which can be found here (<a href="http://www.sthda.com/english/wiki/ggplot2-point-shapes" class="uri">http://www.sthda.com/english/wiki/ggplot2-point-shapes</a>)</p>
<p>Something else we can do is alter our figure legends. At this point, the figure legend has been taking on the name of the aesthetic, but we can change it to something that is more informative.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-25-1.png" width="624" /></p>
<p>Well, its a start, but we still see the shape legend as ‘factor(cyl)’. How can we fix this?</p>
<p>In the example below, edit the above code so that our plot has a color legend with the title ‘# of Cylinders’. Also, change the colors of the plot so the values are equal to c(‘red’, ‘green’, ‘blue’).</p>
<p><img src="DataVizinR_files/figure-html/exercise-scales1-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-scales1-solution-1.png" width="624" /></p>
<p>That looks great! But what if we want to change the x and y axis to show ‘hp’ as Horsepower, and ‘mpg’ as Miles Per Gallon? We would use the scale_y_continuous and scale_x_continuous functions!</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-26-1.png" width="624" /></p>
<p>The reason we chose ‘scale_x_continuous’ and ‘scale_y_continuous’ is because mpg and hp are both continous variables. What would we do if we were looking at discrete variables, such as the number of cylinders from our earlier boxplot example:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-27-1.png" width="624" /></p>
<p>We’d have to use the scale_x_discrete() function, like this.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-28-1.png" width="624" /></p>
<p>…and if we wanted to change the x axis so that the numbers displayed are written out in character form? <img src="DataVizinR_files/figure-html/unnamed-chunk-29-1.png" width="624" /></p>
<p>In the above example, we included the ‘breaks’ argument to indicate that we want to adjust the values at 4, 6, and 8 on our x axis. We then utilized the ‘labels’ argument to tell R that we want it to say ‘Four’, ‘Six’, and ‘Eight’ below. Now its your turn!</p>
<p>For this next exercise, you will recreate the bottom plot using the ‘scale_y_continuous function’ to show breaks at 10, 20, and 30. Also, you will name the y axis ‘Miles Per Gallon’.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-30-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-scales2-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-scales2-solution-1.png" width="624" /></p>
<p>There are many other scales to work with each kind of variable and axis. While we utilized scales that required manul input, other scales exist that come with other colors, shapes, or any other scale as a default.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-31-1.png" width="624" /></p>
<p>The above example utilized the ‘scale_color_grey()’ function which may be useful if you want to save on printing costs for colored figures!</p>
<p>Scales provide a wonderful method to customize your plot, however, the ability to customize <em>every single characteristic</em> of a plot is what makes ggplot2 so flexible. To learn how to make the most minute and detailed changes to a plot, we will learn to use <em>themes</em>.</p>
</div>
<div id="section-topic-5---themes" class="section level2">
<h2>Topic 5 - Themes</h2>
<p>Themes in ggplot can take a good looking chart that you’d show at a data blitz to a high-quality visualization that you would submit for publication.</p>
<p>In our examples, we have used a grey background, with white axis breaks that placed the legend to the right of the plot. While none of these are inherently bad, what if we wanted to change how our plot looked? We would use <em>Themes</em>.</p>
<p>Now, ggplot comes pre-loaded with some themes that we can use, and for most people these pre-loaded themes are enough. I personally like to use the pre-loaded, ‘theme_bw()’ which gives a white background and grey axis lines.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-32-1.png" width="624" /></p>
<p>However, there are also other themes as well and there is an entire R package devoted to cool themes, ‘ggthemes’.</p>
<pre class="r"><code>library(ggthemes)</code></pre>
<p>Using ‘ggthemes’ we can utilize both new themes as well as new scales! In the below example, you can fool others into thinking you made your graph in excel when you actually used R!</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-34-1.png" width="624" /></p>
<p>Or you can change it to mimic the Wall Street Journal’s theme.</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-35-1.png" width="624" /></p>
<p>In this exercise, explore some of the other themes that you can use to change how your graph looks! Mix and match the color scales with different themes too.</p>
<p><img src="DataVizinR_files/figure-html/exercise-themes1-1.png" width="624" /></p>
<p>Its great that there are pre-loaded themes in ggplot, but what if I want to make little changes to the themes that are already present?</p>
<p>Do you remember how ggplots are made with <em>layers</em>? Well themes are nothing more than a layer that can be altered with another theme layer. Let me show you.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg, 
                 colour = factor(cyl),
                 shape = factor(cyl))) +
  scale_shape_manual(name = &#39;# of Cylinders&#39;,
                     breaks = c(4,6,8),
                     values = c(1,2,3)) +
  scale_color_discrete(name = &#39;# of Cylinders&#39;) +
  scale_y_continuous(name = &#39;Miles Per Gallon&#39;) +
  scale_x_continuous(name = &#39;Horsepower&#39;) +
  theme_bw() +
  theme(axis.title = element_text(size = 40))</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-36-1.png" width="624" /></p>
<p>In the above example, I decided to make the axis titles absolutely too large by adding on a general theme layer. Now the theme function has <strong>dozens</strong> of different arguments that I won’t dive into but can be found here (<a href="https://ggplot2.tidyverse.org/reference/theme.html" class="uri">https://ggplot2.tidyverse.org/reference/theme.html</a>).</p>
<p>Each argument in the theme will allow you alter any character in your graph. Want your x axis text to be blue and y axis text to be green? Done.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg, 
                 colour = factor(cyl),
                 shape = factor(cyl))) +
  scale_shape_manual(name = &#39;# of Cylinders&#39;,
                     breaks = c(4,6,8),
                     values = c(1,2,3)) +
  scale_color_discrete(name = &#39;# of Cylinders&#39;) +
  scale_y_continuous(name = &#39;Miles Per Gallon&#39;) +
  scale_x_continuous(name = &#39;Horsepower&#39;) +
  theme_bw() +
  theme(axis.title = element_text(size = 40),
        axis.text.x = element_text(color = &#39;blue&#39;),
        axis.text.y = element_text(color = &#39;green&#39;))</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-37-1.png" width="624" /></p>
<p>Want to have purple lines on your graph instead of grey? Done.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg, 
                 colour = factor(cyl),
                 shape = factor(cyl))) +
  scale_shape_manual(name = &#39;# of Cylinders&#39;,
                     breaks = c(4,6,8),
                     values = c(1,2,3)) +
  scale_color_discrete(name = &#39;# of Cylinders&#39;) +
  scale_y_continuous(name = &#39;Miles Per Gallon&#39;) +
  scale_x_continuous(name = &#39;Horsepower&#39;) +
  theme_bw() +
  theme(axis.title = element_text(size = 40),
        axis.text.x = element_text(color = &#39;blue&#39;),
        axis.text.y = element_text(color = &#39;green&#39;),
        panel.grid = element_line(color = &#39;purple&#39;))</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-38-1.png" width="624" /></p>
<p>Want to put the legend on top of the graph and make the background orange? Done.</p>
<pre class="r"><code>ggplot(data = mtcars) +
  geom_point(aes(x = hp, 
                 y = mpg, 
                 colour = factor(cyl),
                 shape = factor(cyl))) +
  scale_shape_manual(name = &#39;# of Cylinders&#39;,
                     breaks = c(4,6,8),
                     values = c(1,2,3)) +
  scale_color_discrete(name = &#39;# of Cylinders&#39;) +
  scale_y_continuous(name = &#39;Miles Per Gallon&#39;) +
  scale_x_continuous(name = &#39;Horsepower&#39;) +
  theme_bw() +
  theme(axis.title = element_text(size = 40),
        axis.text.x = element_text(color = &#39;blue&#39;),
        axis.text.y = element_text(color = &#39;green&#39;),
        panel.grid = element_line(color = &#39;purple&#39;),
        legend.position = &#39;top&#39;,
        panel.background = element_rect(fill = &#39;orange&#39;))</code></pre>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-39-1.png" width="624" /></p>
<p>The tricky part about using the theme function is that each argument (i.e. axis.title or panel.grid) also have their own functions that come along with the arguments.</p>
<p>Most times in R Studio, you can type out ‘axis.title’ or any other theme element you’d like to change and it will tell you what function goes along with that particular element. However, this is also pretty intuitive without the extra drop down menu:</p>
<ul>
<li>If the element is text based (such as axis.text or legend.title) you’ll use the element_text().</li>
<li>If the element is a single line (such as the panel.grid lines) you’ll use the element_line().</li>
<li>If the element is a shape (such as panel.background) you’ll use the element_rect().</li>
<li>If you don’t want a particular element to appear (maybe you want to hide an axis) you’ll use the element_blank().</li>
</ul>
<p>Now that we have a better understanding of how themes work, our next exercise will be to use these themes to modify our plot.</p>
<p>Try to recreate the plot below by using the arguments within the ‘theme()’ function:</p>
<p><img src="DataVizinR_files/figure-html/unnamed-chunk-40-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-themes2-1.png" width="624" /></p>
<p><img src="DataVizinR_files/figure-html/exercise-themes2-solution-1.png" width="624" /></p>
<p>In ggplot2, there is an unlimited number of ways you can alter your plot, and I have shown only those that are most likely to be used. It is possible to alter each individual tick mark and these subtle changes can be addressed in a later tutorial.</p>
</div>
<div id="section-conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Congratulations! You’ve successfully worked through the introductory ggplot2 basics tutorial! GGplot2 provides an infinite number of possibilities for your data visualization needs, and packages are made every day to make new plots, add new themes, and alter each piece of your graphs.</p>
<p>If you have any questions about using ggplot2 or data visualization in general, I can be reached at <a href="mailto:brandonhoenig@gmail.com">brandonhoenig@gmail.com</a>.</p>
<p>Happy Plotting!</p>
Brandon D. Hoenig (He/Him) PhD Candidate, Biology Duquesne University 
<script type="application/shiny-prerendered" data-context="server-start">
library(shiny)
library(learnr)
library(ggplot2)
library(tidyr)
library(dplyr)
knitr::opts_chunk$set(echo = FALSE)
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.0"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]}},"value":[{"type":"character","attributes":{},"value":["askpass","assertthat","backports","base","BiocManager","colorspace","compiler","crayon","curl","datasets","digest","dplyr","evaluate","farver","fastmap","ggplot2","ggthemes","glue","graphics","grDevices","grid","gtable","htmltools","htmlwidgets","httpuv","jsonlite","knitr","labeling","later","lazyeval","learnr","lifecycle","magrittr","markdown","methods","mime","munsell","openssl","packrat","pillar","pkgconfig","promises","purrr","R6","Rcpp","rlang","rmarkdown","rprojroot","rsconnect","scales","shiny","stats","stringi","stringr","tibble","tidyr","tidyselect","tools","utils","vctrs","withr","xfun","xtable","yaml","zeallot"]},{"type":"character","attributes":{},"value":["1.1","0.2.1","1.1.5","3.5.2","1.30.10","1.4-1","3.5.2","1.3.4","4.3","3.5.2","0.6.23","0.8.3","0.14","2.0.1","1.0.1","3.2.1","4.2.0","1.3.1","3.5.2","3.5.2","3.5.2","0.3.0","0.4.0","1.5.1","1.5.2","1.6","1.26","0.3","1.0.0","0.2.2","0.10.1","0.1.0","1.5","1.1","3.5.2","0.7","0.5.0","1.4.1","0.5.0","1.4.2","2.0.3","1.1.0","0.3.3","2.4.1","1.0.3","0.4.2","2.0","1.3-2","0.8.16","1.1.0","1.4.0","3.5.2","1.4.3","1.4.0","2.1.3","1.0.0","0.2.5","3.5.2","3.5.2","0.2.0","2.1.2","0.11","1.8-4","2.2.0","0.1.0"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Data Visualization in R: GGplot2 Basics</h2>
<h3 class="subtitle"><em>Brandon D. Hoenig</em></h3>
<h4 class="author"><em><a href="mailto:brandonhoenig@gmail.com">brandonhoenig@gmail.com</a>, <span class="citation">@BrandonHoenig</span></em></h4>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
